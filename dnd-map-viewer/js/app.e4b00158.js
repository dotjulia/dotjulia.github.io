(function(e){function n(n){for(var a,o,s=n[0],l=n[1],c=n[2],d=0,f=[];d<s.length;d++)o=s[d],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&f.push(r[o][0]),r[o]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a]);u&&u(n);while(f.length)f.shift()();return i.push.apply(i,c||[]),t()}function t(){for(var e,n=0;n<i.length;n++){for(var t=i[n],a=!0,s=1;s<t.length;s++){var l=t[s];0!==r[l]&&(a=!1)}a&&(i.splice(n--,1),e=o(o.s=t[0]))}return e}var a={},r={app:0},i=[];function o(n){if(a[n])return a[n].exports;var t=a[n]={i:n,l:!1,exports:{}};return e[n].call(t.exports,t,t.exports,o),t.l=!0,t.exports}o.m=e,o.c=a,o.d=function(e,n,t){o.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:t})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,n){if(1&n&&(e=o(e)),8&n)return e;if(4&n&&"object"===typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(o.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var a in e)o.d(t,a,function(n){return e[n]}.bind(null,a));return t},o.n=function(e){var n=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(n,"a",n),n},o.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},o.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],l=s.push.bind(s);s.push=n,s=s.slice();for(var c=0;c<s.length;c++)n(s[c]);var u=l;i.push([0,"chunk-vendors"]),t()})({0:function(e,n,t){e.exports=t("56d7")},"034f":function(e,n,t){"use strict";t("64a9")},"04b0":function(e,n,t){},"399c":function(e,n,t){"use strict";t("5259")},"41b0":function(e,n,t){"use strict";t("04b0")},"486a":function(e,n,t){},5259:function(e,n,t){},"56d7":function(e,n,t){"use strict";t.r(n);t("cadf"),t("551c"),t("f751"),t("097d");var a=t("2b0e"),r=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{attrs:{id:"app"}},[t("settings",{attrs:{backgroundSize:e.backgroundImageSize,players:e.players,enemies:e.enemies},on:{changedbackground:function(n){return e.backgroundSizeChanged(n)},rerender:function(n){return e.rerender()},newbackground:function(n){return e.setBackground(n)},deleteplayer:function(n){return e.deletePlayer(n)},deleteenemy:function(n){return e.deleteEnemy(n)},addplayer:function(n){return e.addPlayer()},addenemy:function(n){return e.addEnemy()},changeenemies:function(n){e.enemies=n},changeplayers:function(n){e.players=n},debugobstacle:function(n){return e.debugObstacles()},lineofsightchange:function(n){return e.lineOfSightChange(n)}}}),t("canvas-renderer",{ref:"canvasrenderer",attrs:{backgroundImageSize:e.backgroundImageSize,players:e.players,enemies:e.enemies,backgroundImage:e.imageData,lineOfSight:e.lineOfSight,lineOfSightEnabled:e.lineOfSightEnabled}})],1)},i=[],o=(t("ac6a"),t("ac4d"),t("8a81"),t("5df3"),t("1c4c"),t("6b54"),t("28a5"),t("7f7f"),t("6762"),t("2fdb"),function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("canvas",{ref:"canvas",staticClass:"canvas-renderer"})}),s=[],l=(t("96cf"),t("3b8d"));t("6c7b"),t("c5f6");function c(e,n){var t;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(t=u(e))||n&&e&&"number"===typeof e.length){t&&(e=t);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){t=e[Symbol.iterator]()},n:function(){var e=t.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==t.return||t.return()}finally{if(s)throw i}}}}function u(e,n){if(e){if("string"===typeof e)return d(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?d(e,n):void 0}}function d(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,a=new Array(n);t<n;t++)a[t]=e[t];return a}var f={name:"CanvasRenderer",props:{players:Array,enemies:Array,backgroundImage:String,backgroundImageSize:Number,lineOfSight:Array,lineOfSightEnabled:Boolean},data:function(){return{canvasCTX:null,draggingPlayer:null,loadedImage:null,onCanvasImageDimensions:{x:0,y:0}}},methods:{renderBackground:function(){var e=this;return new Promise((function(n,t){if(e.loadedImage&&e.loadedImage.src==e.backgroundImage){var a=e.backgroundImageSize,r=e.loadedImage.width/e.loadedImage.height;return e.canvasCTX.drawImage(e.loadedImage,0,0,e.loadedImage.width,e.loadedImage.height,0,0,a*r,a),void n()}var i=new Image;i.onload=function(){var t=e.backgroundImageSize,a=i.width/i.height;e.canvasCTX.drawImage(i,0,0,i.width,i.height,0,0,t*a,t),e.onCanvasImageDimensions={x:t*a,y:t},e.loadedImage=i,n()},i.src=e.backgroundImage}))},renderPlayers:function(){var e,n=c(this.players);try{for(n.s();!(e=n.n()).done;){var t=e.value;void 0!=t.x&&void 0!=t.y||(t.x=0,t.y=0),this.canvasCTX.beginPath(),this.canvasCTX.arc(t.x,t.y,t.size/2,0,2*Math.PI,!1),this.canvasCTX.fillStyle=t.backgroundColor,this.canvasCTX.fill(),this.canvasCTX.fillStyle=t.foregroundColor,this.canvasCTX.font="".concat(.8*t.size,"px sans-serif"),this.canvasCTX.fillText(t.content,t.x-t.size/4,t.y+t.size/4)}}catch(a){n.e(a)}finally{n.f()}},renderEnemies:function(){var e,n=c(this.enemies);try{for(n.s();!(e=n.n()).done;){var t=e.value;void 0!=t.x&&void 0!=t.y||(t.x=0,t.y=0),this.canvasCTX.beginPath(),this.canvasCTX.arc(t.x,t.y,t.size/2,0,2*Math.PI,!1),this.canvasCTX.fillStyle=t.backgroundColor,this.canvasCTX.fill(),this.canvasCTX.fillStyle=t.foregroundColor,this.canvasCTX.font="".concat(.8*t.size,"px sans-serif"),this.canvasCTX.fillText(t.content,t.x-t.size/4,t.y+t.size/4)}}catch(a){n.e(a)}finally{n.f()}},normalizedXToCanvas:function(e){return e*this.onCanvasImageDimensions.x},normalizedYToCanvas:function(e){return e*this.onCanvasImageDimensions.y},getNormalizedPlayerCoords:function(){var e,n=[],t=c(this.players);try{for(t.s();!(e=t.n()).done;){var a=e.value;n.push({x:a.x/this.onCanvasImageDimensions.x,y:a.y/this.onCanvasImageDimensions.y})}}catch(r){t.e(r)}finally{t.f()}return n},getIntersection:function(e,n,t,a){var r={x:e.x-t.x,y:e.y-t.y},i={x:a.x-t.x,y:a.y-t.y},o={x:-n.y,y:n.x},s=i.x*o.x+i.y*o.y;if(Math.abs(s)<1e-6)return null;var l=(i.x*r.y-i.y*r.x)/s,c=(r.x*o.x+r.y*o.y)/s;return l>=0&&c>=0&&c<=1?l:null},castRay:function(e,n){var t,a=1/0,r=c(this.lineOfSight);try{for(r.s();!(t=r.n()).done;){var i=t.value,o=this.getIntersection(e,n,i[0],i[1]);o&&o<a&&(a=o)}}catch(s){r.e(s)}finally{r.f()}return{x:e.x+n.x*a,y:e.y+n.y*a}},debugRenderObstacles:function(){var e,n=c(this.lineOfSight);try{for(n.s();!(e=n.n()).done;){var t=e.value;this.canvasCTX.beginPath(),this.canvasCTX.strokeStyle="red",this.canvasCTX.rect(this.normalizedXToCanvas(t[0].x),this.normalizedYToCanvas(t[0].y),this.normalizedXToCanvas(t[1].x-t[0].x),this.normalizedYToCanvas(t[1].y-t[0].y)),this.canvasCTX.stroke()}}catch(a){n.e(a)}finally{n.f()}},renderObstacles:function(e){var n,t=this.getNormalizedPlayerCoords(),a=500,r=c(t);try{for(r.s();!(n=r.n()).done;){for(var i=n.value,o=[],s=0;s<=2*Math.PI;s+=2*Math.PI/a){var l={x:Math.cos(s),y:Math.sin(s)},u=this.castRay(i,l);isFinite(u.x)||(u={x:i.x+l.x,y:i.y+l.y}),o.push({hitPoint:u,origin:i})}for(var d=0;d<o.length;d++){var f=o[d],h=o[(d+1)%o.length];e.beginPath(),e.moveTo(this.normalizedXToCanvas(f.origin.x),this.normalizedYToCanvas(f.origin.y)),e.lineTo(this.normalizedXToCanvas(f.hitPoint.x),this.normalizedYToCanvas(f.hitPoint.y)),e.lineTo(this.normalizedXToCanvas(h.hitPoint.x),this.normalizedYToCanvas(h.hitPoint.y)),e.closePath(),e.fillStyle="#000000",e.strokeStyle="#000000",e.stroke(),e.fill()}}}catch(g){r.e(g)}finally{r.f()}},setPixelsOfColorToTransparent:function(e,n,t,a,r){for(var i=e.getContext("2d"),o=i.getImageData(0,0,e.width,e.height),s=o.data,l=0;l<s.length;l+=4)Math.abs(s[l]-n)<r&&Math.abs(s[l+1]-t)<r&&Math.abs(s[l+2]-a)<r&&(s[l+3]=0);i.putImageData(o,0,0)},rerender:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(){var n,t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.$refs.canvas.width=window.innerWidth,this.$refs.canvas.height=window.innerHeight,e.next=4,this.renderBackground();case 4:this.renderEnemies(),this.renderPlayers(),this.lineOfSightEnabled&&(n=document.createElement("canvas"),n.width=this.onCanvasImageDimensions.x,n.height=this.onCanvasImageDimensions.y,t=n.getContext("2d"),t.fillStyle="#333333",t.fillRect(0,0,n.width,n.height),this.renderObstacles(t),this.setPixelsOfColorToTransparent(n,0,0,0,30),this.canvasCTX.drawImage(n,0,0));case 7:case"end":return e.stop()}}),e,this)})));function n(){return e.apply(this,arguments)}return n}(),windowSizeChanged:function(){this.rerender()},isInObjectArray:function(e,n,t){var a,r=c(t);try{for(r.s();!(a=r.n()).done;){var i=a.value,o=i.x-e,s=i.y-n;if(Math.abs(o)<i.size/2&&Math.abs(s)<i.size/2)return i}}catch(l){r.e(l)}finally{r.f()}return!1},mouseDown:function(e){var n=this.isInObjectArray(e.clientX,e.clientY,this.players),t=this.isInObjectArray(e.clientX,e.clientY,this.enemies);n&&(this.draggingPlayer=n),t&&(this.draggingPlayer=t)},mouseMove:function(e){this.draggingPlayer&&(this.draggingPlayer.x=e.clientX,this.draggingPlayer.y=e.clientY,this.rerender())},mouseUp:function(e){this.draggingPlayer=null,this.rerender()}},watch:{backgroundImage:function(e,n){this.rerender()},players:{deep:!0,handler:function(){this.rerender()}},backgroundImageSize:function(){this.rerender()},lineOfSightEnabled:function(){this.rerender()}},mounted:function(){this.canvasCTX=this.$refs.canvas.getContext("2d"),window.addEventListener("resize",this.windowSizeChanged),this.$refs.canvas.addEventListener("mousedown",this.mouseDown),this.$refs.canvas.addEventListener("mouseup",this.mouseUp),this.$refs.canvas.addEventListener("mousemove",this.mouseMove),this.rerender()},destroyed:function(){window.removeEventListener("resize",this.windowSizeChanged),this.$refs.canvas.removeEventListener("mousedown",this.mouseDown),this.$refs.canvas.removeEventListener("mouseup",this.mouseUp),this.$refs.canvas.removeEventListener("mousemove",this.mouseMove)}},h=f,g=(t("b74e"),t("2877")),v=Object(g["a"])(h,o,s,!1,null,"0b1a8e1a",null),p=v.exports,y=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",[e.isCollapsed?t("v-btn",{staticStyle:{right:"0",position:"absolute"},on:{click:function(n){return e.close()}}},[e._v("Open")]):e._e(),e.isCollapsed?e._e():t("div",{ref:"parentEl",staticStyle:{position:"absolute"},attrs:{width:"30%"}},[t("movable",{staticStyle:{"z-index":"10",height:"70px",width:"100%"},attrs:{target:"parentEl"}}),t("v-card",{ref:"settings",staticClass:"settings",attrs:{dark:"",width:"100%"}},[t("v-card-title",[t("span",[e._v("Settings")])]),t("v-list-item",[t("v-list-item-content",[t("v-expansion-panels",[t("v-expansion-panel",[t("v-expansion-panel-header",[e._v(" Players ")]),t("v-expansion-panel-content",[t("v-simple-table",{scopedSlots:e._u([{key:"default",fn:function(){return[t("thead",[t("tr",[t("th",{staticClass:"text-left"},[e._v("#")]),t("th",{staticClass:"text-left"},[e._v("Content")]),t("th",{staticClass:"text-left"},[e._v("Background Color")]),t("th",{staticClass:"text-left"},[e._v("Foreground Color")]),t("th",{staticClass:"text-left"},[e._v("Size")])])]),t("tbody",e._l(e.players,(function(n){return t("player-display",{key:n.id,attrs:{player:n},on:{deleteplayer:function(n){return e.deletePlayer(n)}}})})),1)]},proxy:!0}],null,!1,3028400950)}),t("v-checkbox",{attrs:{label:"Line of sight"},on:{change:e.lineOfSightCheckboxChanged}}),t("v-btn",{staticStyle:{"align-items":"left"},on:{click:function(n){return e.$emit("addplayer")}}},[e._v("\n                  + Add")])],1)],1),t("v-expansion-panel",[t("v-expansion-panel-header",[e._v(" Enemies ")]),t("v-expansion-panel-content",[t("v-simple-table",{scopedSlots:e._u([{key:"default",fn:function(){return[t("thead",[t("tr",[t("th",{staticClass:"text-left"},[e._v("#")]),t("th",{staticClass:"text-left"},[e._v("Content")]),t("th",{staticClass:"text-left"},[e._v("Background Color")]),t("th",{staticClass:"text-left"},[e._v("Foreground Color")]),t("th",{staticClass:"text-left"},[e._v("Size")])])]),t("tbody",e._l(e.enemies,(function(n){return t("player-display",{key:n.id,attrs:{player:n},on:{deleteplayer:function(n){return e.deleteEnemy(n)}}})})),1)]},proxy:!0}],null,!1,1074997610)}),t("v-btn",{staticStyle:{"align-items":"left"},on:{click:function(n){return e.$emit("addenemy")}}},[e._v("\n                  + Add")])],1)],1),t("v-expansion-panel",[t("v-expansion-panel-header",[e._v("\n                Save/Load Positions\n              ")]),t("v-expansion-panel-content",[t("v-btn",{on:{click:e.save}},[e._v("Save")]),t("label",{staticClass:"\n                    v-btn v-btn--is-elevated v-btn--has-bg\n                    theme--dark\n                    v-size--default\n                  ",staticStyle:{"margin-top":"auto","margin-bottom":"auto","margin-right":"20px"}},[t("input",{ref:"sceneUpload",staticStyle:{display:"none"},attrs:{type:"file"},on:{input:e.onSelectScene}}),e._v("\n                  Load (.json)\n                ")])],1)],1),t("v-expansion-panel",[t("v-expansion-panel-header",[e._v("\n                Background\n              ")]),t("v-expansion-panel-content",[t("div",{staticClass:"flexbox"},[t("label",{staticClass:"\n                      v-btn v-btn--is-elevated v-btn--has-bg\n                      theme--dark\n                      v-size--default\n                    ",staticStyle:{"margin-top":"auto","margin-bottom":"auto","margin-right":"20px"}},[t("input",{ref:"fileInput",staticStyle:{display:"none"},attrs:{type:"file"},on:{input:e.onSelectFile}}),e._v("\n                    Select Background (png jpg dd2vtt)\n                  ")]),t("v-text-field",{staticClass:"background-size-input",attrs:{solo:"","append-icon":"mdi-image-size-select-large"},on:{change:function(n){return e.$emit("changedbackground",e.size)}},model:{value:e.size,callback:function(n){e.size=n},expression:"size"}})],1)])],1),t("v-expansion-panel",[t("v-expansion-panel-header",[e._v(" Debug ")]),t("v-expansion-panel-content",[t("v-btn",{on:{click:function(n){return e.$emit("rerender")}}},[e._v("Rerender")]),t("v-btn",{on:{click:function(n){return e.$emit("debugobstacle")}}},[e._v("Render Obstacles")])],1)],1)],1)],1)],1),t("v-card-actions",[t("v-btn",{attrs:{color:"orange lighten-2"},on:{click:function(n){return e.close()}}},[e._v(" Close ")])],1)],1)],1)],1)},m=[],b=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("tr",[t("td",[e._v(e._s(e.player.id))]),t("td",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.player.content,expression:"player.content"}],attrs:{type:"text",solo:""},domProps:{value:e.player.content},on:{input:function(n){n.target.composing||e.$set(e.player,"content",n.target.value)}}})]),t("td",[t("v-swatches",{staticClass:"swatch",attrs:{"background-color":"#212121",solo:""},model:{value:e.player.backgroundColor,callback:function(n){e.$set(e.player,"backgroundColor",n)},expression:"player.backgroundColor"}})],1),t("td",[t("v-swatches",{staticClass:"swatch",attrs:{"background-color":"#212121",solo:""},model:{value:e.player.foregroundColor,callback:function(n){e.$set(e.player,"foregroundColor",n)},expression:"player.foregroundColor"}})],1),t("td",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.player.size,expression:"player.size"}],attrs:{type:"text",solo:""},domProps:{value:e.player.size},on:{input:function(n){n.target.composing||e.$set(e.player,"size",n.target.value)}}})]),t("v-btn",{attrs:{icon:"",color:"pink"},on:{click:function(n){return e.deletePlayer()}}},[t("v-icon",[e._v("mdi-delete")])],1)],1)},x=[],C=t("7f75"),S=t.n(C),k=(t("b3a4"),{components:{VSwatches:S.a},name:"PlayerDisplay",mounted:function(){console.log(this.$vuetify.theme.themes.dark)},methods:{deletePlayer:function(){this.$emit("deleteplayer",this.player.id)}},props:{player:Object,data:function(){return{}}}}),w=k,z=(t("399c"),t("6544")),I=t.n(z),O=t("8336"),P=t("132d"),_=Object(g["a"])(w,b,x,!1,null,"4e64fd2a",null),T=_.exports;I()(_,{VBtn:O["a"],VIcon:P["a"]});var E={components:{PlayerDisplay:T},name:"Settings",props:{players:Array,enemies:Array,backgroundSize:Number},data:function(){return{size:400,isCollapsed:!1}},mounted:function(){this.size=this.backgroundSize},methods:{close:function(){this.isCollapsed=!this.isCollapsed},save:function(){var e=JSON.stringify({players:this.players,enemies:this.enemies,backgroundSize:this.backgroundSize}),n="data:text/json;charset=utf-8,"+encodeURIComponent(e),t=document.createElement("a");t.style.display="none",t.setAttribute("href",n),t.setAttribute("download","scene.json"),t.click(),console.log(e)},deletePlayer:function(e){this.$emit("deleteplayer",e)},deleteEnemy:function(e){this.$emit("deleteenemy",e)},lineOfSightCheckboxChanged:function(e){this.$emit("lineofsightchange",e)},onSelectFile:function(){var e=this,n=this.$refs.fileInput,t=n.files;if(t&&t[0]){var a=new FileReader;a.onload=function(n){e.$emit("newbackground",{result:n.target.result,name:t[0].name})},a.readAsDataURL(t[0])}else console.log("no image selected")},onSelectScene:function(){var e=this,n=this.$refs.sceneUpload,t=n.files;if(t&&t[0]){var a=new FileReader;a.onload=function(n){var t=JSON.parse(atob(n.target.result.split("base64,")[1]));console.log(t),e.$emit("changedbackground",t.backgroundSize),e.$emit("changeenemies",t.enemies),e.$emit("changeplayers",t.players)},a.readAsDataURL(t[0])}else console.log("no scene selected")}}},$=E,X=(t("41b0"),t("b0af")),j=t("99d9"),A=t("ac7c"),D=t("cd55"),M=t("49e2"),R=t("c865"),V=t("0393"),L=t("da13"),B=t("5d23"),N=t("1f4f"),F=t("8654"),U=Object(g["a"])($,y,m,!1,null,"6be7863a",null),Y=U.exports;function J(e,n){var t;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(t=H(e))||n&&e&&"number"===typeof e.length){t&&(e=t);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){t=e[Symbol.iterator]()},n:function(){var e=t.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==t.return||t.return()}finally{if(s)throw i}}}}function H(e,n){if(e){if("string"===typeof e)return q(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?q(e,n):void 0}}function q(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,a=new Array(n);t<n;t++)a[t]=e[t];return a}I()(U,{VBtn:O["a"],VCard:X["a"],VCardActions:j["a"],VCardTitle:j["b"],VCheckbox:A["a"],VExpansionPanel:D["a"],VExpansionPanelContent:M["a"],VExpansionPanelHeader:R["a"],VExpansionPanels:V["a"],VListItem:L["a"],VListItemContent:B["a"],VSimpleTable:N["a"],VTextField:F["a"]});var W={name:"app",components:{Settings:Y,CanvasRenderer:p},methods:{debugObstacles:function(){this.$refs.canvasrenderer.debugRenderObstacles()},backgroundSizeChanged:function(e){this.backgroundImageSize=+e},rerender:function(){this.$refs.canvasrenderer.rerender()},lineOfSightChange:function(e){this.lineOfSightEnabled=e},setBackground:function(e){if(e.name.includes("vtt")){var n=JSON.parse(atob(e.result.split("base64,")[1]));this.imageData="data:image/png;base64,"+n.image;var t,a=n.resolution.map_size,r=J(n.line_of_sight);try{for(r.s();!(t=r.n()).done;){var i=t.value;i[0].x=i[0].x/a.x,i[0].y=i[0].y/a.y,i[1].x=i[1].x/a.x,i[1].y=i[1].y/a.y}}catch(o){r.e(o)}finally{r.f()}this.lineOfSight=n.line_of_sight}else this.imageData=e.result},addPlayer:function(){this.players.push({id:this.players.reduce((function(e,n){return e<n.id?n.id:e}),this.players[0].id)+1,backgroundColor:this.players[0].backgroundColor,foregroundColor:this.players[0].foregroundColor,content:this.players[0].content,size:this.players[0].size})},addEnemy:function(){this.enemies.push({id:this.enemies.reduce((function(e,n){return e<n.id?n.id:e}),this.enemies[0].id)+1,backgroundColor:this.enemies[0].backgroundColor,foregroundColor:this.enemies[0].foregroundColor,content:this.enemies[0].content,size:this.enemies[0].size})},deleteEnemy:function(e){this.enemies=this.enemies.filter((function(n){return n.id!=e}))},deletePlayer:function(e){this.players=this.players.filter((function(n){return n.id!=e}))}},data:function(){return{lineOfSightEnabled:!1,backgroundImageSize:800,imageData:"https://i.redd.it/oteavhdmcnl61.jpg",lineOfSight:[],enemies:[{id:0,backgroundColor:"#00ff00",foregroundColor:"#ffffff",content:"E",x:100,y:100,size:25}],players:[{id:0,backgroundColor:"#ff0000",foregroundColor:"#ffffff",content:"P",x:50,y:100,size:25}]}}},G=W,K=(t("034f"),Object(g["a"])(G,r,i,!1,null,null,null)),Q=K.exports,Z=t("1051"),ee=t.n(Z),ne=t("9483");Object(ne["a"])("".concat("/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}});var te=t("f309");a["default"].use(te["a"]);var ae=new te["a"]({});a["default"].config.productionTip=!1,a["default"].use(ee.a),new a["default"]({vuetify:ae,render:function(e){return e(Q)}}).$mount("#app")},"64a9":function(e,n,t){},b74e:function(e,n,t){"use strict";t("486a")}});
//# sourceMappingURL=app.e4b00158.js.map