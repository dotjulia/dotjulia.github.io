{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/App.vue?de97","webpack:///./src/components/PlayerDisplay.vue?7355","webpack:///./src/components/Settings.vue?b710","webpack:///./src/App.vue?c12d","webpack:///./src/components/CanvasRenderer.vue?815c","webpack:///src/components/CanvasRenderer.vue","webpack:///./src/components/CanvasRenderer.vue?bb4a","webpack:///./src/components/CanvasRenderer.vue?1a82","webpack:///./src/components/Settings.vue?158d","webpack:///./src/components/PlayerDisplay.vue?5688","webpack:///src/components/PlayerDisplay.vue","webpack:///./src/components/PlayerDisplay.vue?51bb","webpack:///./src/components/PlayerDisplay.vue?b605","webpack:///src/components/Settings.vue","webpack:///./src/components/Settings.vue?7eb0","webpack:///./src/components/Settings.vue?4dcb","webpack:///src/App.vue","webpack:///./src/App.vue?a37b","webpack:///./src/App.vue?ea56","webpack:///./src/registerServiceWorker.js","webpack:///./src/plugins/vuetify.js","webpack:///./src/main.js","webpack:///./src/components/CanvasRenderer.vue?f413"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","_vm","this","_h","$createElement","_c","_self","attrs","backgroundImageSize","players","enemies","on","$event","backgroundSizeChanged","rerender","setBackground","deletePlayer","deleteEnemy","addPlayer","addEnemy","debugObstacles","lineOfSightChange","ref","imageData","lineOfSight","lineOfSightEnabled","staticRenderFns","staticClass","props","Array","backgroundImage","String","Number","Boolean","canvasCTX","draggingPlayer","loadedImage","onCanvasImageDimensions","methods","renderBackground","Promise","res","im","onload","src","renderPlayers","renderEnemies","normalizedXToCanvas","x","normalizedYToCanvas","y","getNormalizedPlayerCoords","coords","getIntersection","Math","abs","dot","t1","t2","castRay","origin","direction","smallestIntersection","debugRenderObstacles","renderObstacles","setPixelsOfColorToTransparent","ctx","putImageData","windowSizeChanged","isInObjectArray","mouseDown","player","enemy","mouseMove","event","clientX","clientY","mouseUp","watch","deep","handler","mounted","$refs","canvas","getContext","addEventListener","destroyed","removeEventListener","component","staticStyle","close","_v","_e","isCollapsed","scopedSlots","_u","fn","_l","id","proxy","lineOfSightCheckboxChanged","$emit","save","onSelectScene","onSelectFile","size","model","callback","$$v","expression","_s","directives","rawName","domProps","target","composing","$set","VBtn","VIcon","components","backgroundSize","downloadAnchor","style","display","setAttribute","downloadData","click","console","log","e","files","reader","readAsDataURL","VCard","VCardActions","VCardTitle","VCheckbox","VExpansionPanel","VExpansionPanelContent","VExpansionPanelHeader","VExpansionPanels","VListItem","VListItemContent","VList","VSimpleTable","VTextField","Settings","CanvasRenderer","canvasrenderer","bg","includes","image","line_of_sight","backgroundColor","foregroundColor","content","filter","register","process","ready","registered","cached","updatefound","updated","offline","error","Vue","use","Vuetify","config","productionTip","movable","vuetify","render","h","App","$mount"],"mappings":"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","file":"js/app.e4b00158.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=css&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PlayerDisplay.vue?vue&type=style&index=0&id=4e64fd2a&scoped=true&lang=css&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Settings.vue?vue&type=style&index=0&id=6be7863a&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('settings',{attrs:{\"backgroundSize\":_vm.backgroundImageSize,\"players\":_vm.players,\"enemies\":_vm.enemies},on:{\"changedbackground\":function($event){return _vm.backgroundSizeChanged($event)},\"rerender\":function($event){return _vm.rerender()},\"newbackground\":function($event){return _vm.setBackground($event)},\"deleteplayer\":function($event){return _vm.deletePlayer($event)},\"deleteenemy\":function($event){return _vm.deleteEnemy($event)},\"addplayer\":function($event){return _vm.addPlayer()},\"addenemy\":function($event){return _vm.addEnemy()},\"changeenemies\":function($event){_vm.enemies = $event},\"changeplayers\":function($event){_vm.players = $event},\"debugobstacle\":function($event){return _vm.debugObstacles()},\"lineofsightchange\":function($event){return _vm.lineOfSightChange($event)}}}),_c('canvas-renderer',{ref:\"canvasrenderer\",attrs:{\"backgroundImageSize\":_vm.backgroundImageSize,\"players\":_vm.players,\"enemies\":_vm.enemies,\"backgroundImage\":_vm.imageData,\"lineOfSight\":_vm.lineOfSight,\"lineOfSightEnabled\":_vm.lineOfSightEnabled}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('canvas',{ref:\"canvas\",staticClass:\"canvas-renderer\"})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <canvas class=\"canvas-renderer\" ref=\"canvas\"> </canvas>\n</template>\n\n<script>\nexport default {\n  name: \"CanvasRenderer\",\n  props: {\n    players: Array,\n    enemies: Array,\n    backgroundImage: String,\n    backgroundImageSize: Number,\n    lineOfSight: Array,\n    lineOfSightEnabled: Boolean,\n  },\n  data() {\n    return {\n      canvasCTX: null,\n      draggingPlayer: null,\n      loadedImage: null,\n      onCanvasImageDimensions: { x: 0, y: 0 },\n    };\n  },\n  methods: {\n    renderBackground() {\n      return new Promise((res, rej) => {\n        if (!this.loadedImage || this.loadedImage.src != this.backgroundImage) {\n          const im = new Image();\n          im.onload = () => {\n            const cH = this.backgroundImageSize;\n            const aspectRatio = im.width / im.height;\n            this.canvasCTX.drawImage(\n              im,\n              0,\n              0,\n              im.width,\n              im.height,\n              0,\n              0,\n              cH * aspectRatio,\n              cH\n            );\n            this.onCanvasImageDimensions = { x: cH * aspectRatio, y: cH };\n            this.loadedImage = im;\n            res();\n          };\n          im.src = this.backgroundImage;\n        } else {\n          const cH = this.backgroundImageSize;\n          const aspectRatio = this.loadedImage.width / this.loadedImage.height;\n          this.canvasCTX.drawImage(\n            this.loadedImage,\n            0,\n            0,\n            this.loadedImage.width,\n            this.loadedImage.height,\n            0,\n            0,\n            cH * aspectRatio,\n            cH\n          );\n          res();\n          return;\n        }\n      });\n    },\n    renderPlayers() {\n      for (const player of this.players) {\n        if (player.x == undefined || player.y == undefined) {\n          player.x = 0;\n          player.y = 0;\n        }\n        this.canvasCTX.beginPath();\n        this.canvasCTX.arc(\n          player.x,\n          player.y,\n          player.size / 2,\n          0,\n          2 * Math.PI,\n          false\n        );\n        this.canvasCTX.fillStyle = player.backgroundColor;\n        this.canvasCTX.fill();\n        this.canvasCTX.fillStyle = player.foregroundColor;\n        this.canvasCTX.font = `${player.size * 0.8}px sans-serif`;\n        this.canvasCTX.fillText(\n          player.content,\n          player.x - player.size / 4,\n          player.y + player.size / 4\n        );\n      }\n    },\n    renderEnemies() {\n      for (const enemy of this.enemies) {\n        if (enemy.x == undefined || enemy.y == undefined) {\n          enemy.x = 0;\n          enemy.y = 0;\n        }\n        this.canvasCTX.beginPath();\n        this.canvasCTX.arc(\n          enemy.x,\n          enemy.y,\n          enemy.size / 2,\n          0,\n          2 * Math.PI,\n          false\n        );\n        this.canvasCTX.fillStyle = enemy.backgroundColor;\n        this.canvasCTX.fill();\n        this.canvasCTX.fillStyle = enemy.foregroundColor;\n        this.canvasCTX.font = `${enemy.size * 0.8}px sans-serif`;\n        this.canvasCTX.fillText(\n          enemy.content,\n          enemy.x - enemy.size / 4,\n          enemy.y + enemy.size / 4\n        );\n      }\n    },\n    normalizedXToCanvas(x) {\n      return x * this.onCanvasImageDimensions.x;\n    },\n    normalizedYToCanvas(y) {\n      return y * this.onCanvasImageDimensions.y;\n    },\n    getNormalizedPlayerCoords() {\n      const coords = [];\n      for (const player of this.players) {\n        coords.push({\n          x: player.x / this.onCanvasImageDimensions.x,\n          y: player.y / this.onCanvasImageDimensions.y,\n        });\n      }\n      return coords;\n    },\n    getIntersection(origin, direction, point1, point2) {\n      const v1 = { x: origin.x - point1.x, y: origin.y - point1.y };\n      const v2 = { x: point2.x - point1.x, y: point2.y - point1.y };\n      const v3 = { x: -direction.y, y: direction.x };\n      const dot = v2.x * v3.x + v2.y * v3.y;\n      if (Math.abs(dot) < 0.000001) {\n        return null;\n      }\n      const t1 = (v2.x * v1.y - v2.y * v1.x) / dot;\n      const t2 = (v1.x * v3.x + v1.y * v3.y) / dot;\n      if (t1 >= 0.0 && t2 >= 0.0 && t2 <= 1.0) return t1;\n      return null;\n    },\n    castRay(origin, direction) {\n      let smallestIntersection = Infinity;\n      for (const lineSegment of this.lineOfSight) {\n        const intersection = this.getIntersection(\n          origin,\n          direction,\n          lineSegment[0],\n          lineSegment[1]\n        );\n        if (intersection && intersection < smallestIntersection) {\n          smallestIntersection = intersection;\n        }\n      }\n      return {\n        x: origin.x + direction.x * smallestIntersection,\n        y: origin.y + direction.y * smallestIntersection,\n      };\n    },\n    debugRenderObstacles() {\n      for (const obstacle of this.lineOfSight) {\n        this.canvasCTX.beginPath();\n        this.canvasCTX.strokeStyle = \"red\";\n        this.canvasCTX.rect(\n          this.normalizedXToCanvas(obstacle[0].x),\n          this.normalizedYToCanvas(obstacle[0].y),\n          this.normalizedXToCanvas(obstacle[1].x - obstacle[0].x),\n          this.normalizedYToCanvas(obstacle[1].y - obstacle[0].y)\n        );\n        this.canvasCTX.stroke();\n      }\n    },\n    renderObstacles(ctx) {\n      const normalizedPlayerCoords = this.getNormalizedPlayerCoords();\n      const amountOfLines = 500;\n      for (const player of normalizedPlayerCoords) {\n        const rays = [];\n        for (let i = 0; i <= Math.PI * 2; i += (Math.PI * 2) / amountOfLines) {\n          const rotVec = { x: Math.cos(i), y: Math.sin(i) };\n          let hitPoint = this.castRay(player, rotVec);\n          if (!isFinite(hitPoint.x)) {\n            hitPoint = {\n              x: player.x + rotVec.x,\n              y: player.y + rotVec.y,\n            };\n          }\n          rays.push({ hitPoint, origin: player });\n        }\n        for (let i = 0; i < rays.length; i++) {\n          const hit = rays[i];\n          const prevHit = rays[(i + 1) % rays.length];\n          ctx.beginPath();\n          ctx.moveTo(\n            this.normalizedXToCanvas(hit.origin.x),\n            this.normalizedYToCanvas(hit.origin.y)\n          );\n          ctx.lineTo(\n            this.normalizedXToCanvas(hit.hitPoint.x),\n            this.normalizedYToCanvas(hit.hitPoint.y)\n          );\n          ctx.lineTo(\n            this.normalizedXToCanvas(prevHit.hitPoint.x),\n            this.normalizedYToCanvas(prevHit.hitPoint.y)\n          );\n          ctx.closePath();\n          ctx.fillStyle = \"#000000\";\n          ctx.strokeStyle = \"#000000\";\n          ctx.stroke();\n          ctx.fill();\n        }\n      }\n    },\n    setPixelsOfColorToTransparent(canvas, r, g, b, tolerance) {\n      const ctx = canvas.getContext(\"2d\");\n      const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);\n      const data = imageData.data;\n      for (let i = 0; i < data.length; i += 4) {\n        if (\n          Math.abs(data[i] - r) < tolerance &&\n          Math.abs(data[i + 1] - g) < tolerance &&\n          Math.abs(data[i + 2] - b) < tolerance\n        ) {\n          data[i + 3] = 0;\n        }\n      }\n      ctx.putImageData(imageData, 0, 0);\n    },\n    async rerender() {\n      this.$refs.canvas.width = window.innerWidth;\n      this.$refs.canvas.height = window.innerHeight;\n      await this.renderBackground();\n      this.renderEnemies();\n      this.renderPlayers();\n      if (this.lineOfSightEnabled) {\n        const buffer = document.createElement(\"canvas\");\n        buffer.width = this.onCanvasImageDimensions.x;\n        buffer.height = this.onCanvasImageDimensions.y;\n        const bufferCTX = buffer.getContext(\"2d\");\n        bufferCTX.fillStyle = \"#333333\";\n        bufferCTX.fillRect(0, 0, buffer.width, buffer.height);\n        this.renderObstacles(bufferCTX);\n        this.setPixelsOfColorToTransparent(buffer, 0, 0, 0, 30);\n        this.canvasCTX.drawImage(buffer, 0, 0);\n      }\n    },\n    windowSizeChanged() {\n      this.rerender();\n    },\n    isInObjectArray(x, y, players) {\n      for (const player of players) {\n        const deltaX = player.x - x;\n        const deltaY = player.y - y;\n        if (\n          Math.abs(deltaX) < player.size / 2 &&\n          Math.abs(deltaY) < player.size / 2\n        ) {\n          return player;\n        }\n      }\n      return false;\n    },\n    mouseDown(event) {\n      const player = this.isInObjectArray(\n        event.clientX,\n        event.clientY,\n        this.players\n      );\n      const enemy = this.isInObjectArray(\n        event.clientX,\n        event.clientY,\n        this.enemies\n      );\n      if (player) {\n        this.draggingPlayer = player;\n      }\n      if (enemy) {\n        this.draggingPlayer = enemy;\n      }\n    },\n    mouseMove(event) {\n      if (this.draggingPlayer) {\n        this.draggingPlayer.x = event.clientX;\n        this.draggingPlayer.y = event.clientY;\n        this.rerender();\n      }\n    },\n    mouseUp(event) {\n      this.draggingPlayer = null;\n      this.rerender();\n    },\n  },\n  watch: {\n    backgroundImage(newVal, oldVal) {\n      this.rerender();\n    },\n    players: {\n      deep: true,\n      handler() {\n        this.rerender();\n      },\n    },\n    backgroundImageSize() {\n      this.rerender();\n    },\n    lineOfSightEnabled() {\n      this.rerender();\n    },\n  },\n  mounted() {\n    this.canvasCTX = this.$refs.canvas.getContext(\"2d\");\n    window.addEventListener(\"resize\", this.windowSizeChanged);\n    this.$refs.canvas.addEventListener(\"mousedown\", this.mouseDown);\n    this.$refs.canvas.addEventListener(\"mouseup\", this.mouseUp);\n    this.$refs.canvas.addEventListener(\"mousemove\", this.mouseMove);\n    this.rerender();\n  },\n  destroyed() {\n    window.removeEventListener(\"resize\", this.windowSizeChanged);\n    this.$refs.canvas.removeEventListener(\"mousedown\", this.mouseDown);\n    this.$refs.canvas.removeEventListener(\"mouseup\", this.mouseUp);\n    this.$refs.canvas.removeEventListener(\"mousemove\", this.mouseMove);\n  },\n};\n</script>\n\n<style scoped>\n.canvas-renderer {\n  width: 100vw;\n  height: 100vh;\n  position: absolute;\n  left: 0;\n  z-index: -100;\n  top: 0;\n}\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CanvasRenderer.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CanvasRenderer.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./CanvasRenderer.vue?vue&type=template&id=0b1a8e1a&scoped=true&\"\nimport script from \"./CanvasRenderer.vue?vue&type=script&lang=js&\"\nexport * from \"./CanvasRenderer.vue?vue&type=script&lang=js&\"\nimport style0 from \"./CanvasRenderer.vue?vue&type=style&index=0&id=0b1a8e1a&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0b1a8e1a\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[(_vm.isCollapsed)?_c('v-btn',{staticStyle:{\"right\":\"0\",\"position\":\"absolute\"},on:{\"click\":function($event){return _vm.close()}}},[_vm._v(\"Open\")]):_vm._e(),(!_vm.isCollapsed)?_c('div',{ref:\"parentEl\",staticStyle:{\"position\":\"absolute\"},attrs:{\"width\":\"30%\"}},[_c('movable',{staticStyle:{\"z-index\":\"10\",\"height\":\"70px\",\"width\":\"100%\"},attrs:{\"target\":\"parentEl\"}}),_c('v-card',{ref:\"settings\",staticClass:\"settings\",attrs:{\"dark\":\"\",\"width\":\"100%\"}},[_c('v-card-title',[_c('span',[_vm._v(\"Settings\")])]),_c('v-list-item',[_c('v-list-item-content',[_c('v-expansion-panels',[_c('v-expansion-panel',[_c('v-expansion-panel-header',[_vm._v(\" Players \")]),_c('v-expansion-panel-content',[_c('v-simple-table',{scopedSlots:_vm._u([{key:\"default\",fn:function(){return [_c('thead',[_c('tr',[_c('th',{staticClass:\"text-left\"},[_vm._v(\"#\")]),_c('th',{staticClass:\"text-left\"},[_vm._v(\"Content\")]),_c('th',{staticClass:\"text-left\"},[_vm._v(\"Background Color\")]),_c('th',{staticClass:\"text-left\"},[_vm._v(\"Foreground Color\")]),_c('th',{staticClass:\"text-left\"},[_vm._v(\"Size\")])])]),_c('tbody',_vm._l((_vm.players),function(player){return _c('player-display',{key:player.id,attrs:{\"player\":player},on:{\"deleteplayer\":function($event){return _vm.deletePlayer($event)}}})}),1)]},proxy:true}],null,false,3028400950)}),_c('v-checkbox',{attrs:{\"label\":\"Line of sight\"},on:{\"change\":_vm.lineOfSightCheckboxChanged}}),_c('v-btn',{staticStyle:{\"align-items\":\"left\"},on:{\"click\":function($event){return _vm.$emit('addplayer')}}},[_vm._v(\"\\n                  + Add\")])],1)],1),_c('v-expansion-panel',[_c('v-expansion-panel-header',[_vm._v(\" Enemies \")]),_c('v-expansion-panel-content',[_c('v-simple-table',{scopedSlots:_vm._u([{key:\"default\",fn:function(){return [_c('thead',[_c('tr',[_c('th',{staticClass:\"text-left\"},[_vm._v(\"#\")]),_c('th',{staticClass:\"text-left\"},[_vm._v(\"Content\")]),_c('th',{staticClass:\"text-left\"},[_vm._v(\"Background Color\")]),_c('th',{staticClass:\"text-left\"},[_vm._v(\"Foreground Color\")]),_c('th',{staticClass:\"text-left\"},[_vm._v(\"Size\")])])]),_c('tbody',_vm._l((_vm.enemies),function(enemy){return _c('player-display',{key:enemy.id,attrs:{\"player\":enemy},on:{\"deleteplayer\":function($event){return _vm.deleteEnemy($event)}}})}),1)]},proxy:true}],null,false,1074997610)}),_c('v-btn',{staticStyle:{\"align-items\":\"left\"},on:{\"click\":function($event){return _vm.$emit('addenemy')}}},[_vm._v(\"\\n                  + Add\")])],1)],1),_c('v-expansion-panel',[_c('v-expansion-panel-header',[_vm._v(\"\\n                Save/Load Positions\\n              \")]),_c('v-expansion-panel-content',[_c('v-btn',{on:{\"click\":_vm.save}},[_vm._v(\"Save\")]),_c('label',{staticClass:\"\\n                    v-btn v-btn--is-elevated v-btn--has-bg\\n                    theme--dark\\n                    v-size--default\\n                  \",staticStyle:{\"margin-top\":\"auto\",\"margin-bottom\":\"auto\",\"margin-right\":\"20px\"}},[_c('input',{ref:\"sceneUpload\",staticStyle:{\"display\":\"none\"},attrs:{\"type\":\"file\"},on:{\"input\":_vm.onSelectScene}}),_vm._v(\"\\n                  Load (.json)\\n                \")])],1)],1),_c('v-expansion-panel',[_c('v-expansion-panel-header',[_vm._v(\"\\n                Background\\n              \")]),_c('v-expansion-panel-content',[_c('div',{staticClass:\"flexbox\"},[_c('label',{staticClass:\"\\n                      v-btn v-btn--is-elevated v-btn--has-bg\\n                      theme--dark\\n                      v-size--default\\n                    \",staticStyle:{\"margin-top\":\"auto\",\"margin-bottom\":\"auto\",\"margin-right\":\"20px\"}},[_c('input',{ref:\"fileInput\",staticStyle:{\"display\":\"none\"},attrs:{\"type\":\"file\"},on:{\"input\":_vm.onSelectFile}}),_vm._v(\"\\n                    Select Background (png jpg dd2vtt)\\n                  \")]),_c('v-text-field',{staticClass:\"background-size-input\",attrs:{\"solo\":\"\",\"append-icon\":\"mdi-image-size-select-large\"},on:{\"change\":function($event){return _vm.$emit('changedbackground', _vm.size)}},model:{value:(_vm.size),callback:function ($$v) {_vm.size=$$v},expression:\"size\"}})],1)])],1),_c('v-expansion-panel',[_c('v-expansion-panel-header',[_vm._v(\" Debug \")]),_c('v-expansion-panel-content',[_c('v-btn',{on:{\"click\":function($event){return _vm.$emit('rerender')}}},[_vm._v(\"Rerender\")]),_c('v-btn',{on:{\"click\":function($event){return _vm.$emit('debugobstacle')}}},[_vm._v(\"Render Obstacles\")])],1)],1)],1)],1)],1),_c('v-card-actions',[_c('v-btn',{attrs:{\"color\":\"orange lighten-2\"},on:{\"click\":function($event){return _vm.close()}}},[_vm._v(\" Close \")])],1)],1)],1):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('tr',[_c('td',[_vm._v(_vm._s(_vm.player.id))]),_c('td',[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.player.content),expression:\"player.content\"}],attrs:{\"type\":\"text\",\"solo\":\"\"},domProps:{\"value\":(_vm.player.content)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.player, \"content\", $event.target.value)}}})]),_c('td',[_c('v-swatches',{staticClass:\"swatch\",attrs:{\"background-color\":\"#212121\",\"solo\":\"\"},model:{value:(_vm.player.backgroundColor),callback:function ($$v) {_vm.$set(_vm.player, \"backgroundColor\", $$v)},expression:\"player.backgroundColor\"}})],1),_c('td',[_c('v-swatches',{staticClass:\"swatch\",attrs:{\"background-color\":\"#212121\",\"solo\":\"\"},model:{value:(_vm.player.foregroundColor),callback:function ($$v) {_vm.$set(_vm.player, \"foregroundColor\", $$v)},expression:\"player.foregroundColor\"}})],1),_c('td',[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.player.size),expression:\"player.size\"}],attrs:{\"type\":\"text\",\"solo\":\"\"},domProps:{\"value\":(_vm.player.size)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.player, \"size\", $event.target.value)}}})]),_c('v-btn',{attrs:{\"icon\":\"\",\"color\":\"pink\"},on:{\"click\":function($event){return _vm.deletePlayer()}}},[_c('v-icon',[_vm._v(\"mdi-delete\")])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <tr>\n        <td>{{player.id}}</td>\n        <td><input type=\"text\" solo v-model=\"player.content\"></td>\n        <td>\n            <v-swatches class=\"swatch\" background-color=\"#212121\" solo v-model=\"player.backgroundColor\"></v-swatches>\n        </td>\n        <td>\n            <v-swatches class=\"swatch\" background-color=\"#212121\" solo v-model=\"player.foregroundColor\"></v-swatches>\n            <!--<input type=\"color\" solo v-model=\"player.foregroundColor\"/>-->\n        </td>\n        <td><input type=\"text\" solo v-model=\"player.size\"></td>\n        <v-btn icon color=\"pink\" @click=\"deletePlayer()\">\n            <v-icon>mdi-delete</v-icon>\n        </v-btn>\n    </tr>\n</template>\n\n<script>\nimport VSwatches from 'vue-swatches'\nimport 'vue-swatches/dist/vue-swatches.css'\n\nexport default {\n    components: {VSwatches},\n    name: 'PlayerDisplay',\n    mounted() {\n        console.log(this.$vuetify.theme.themes.dark);\n    },\n    methods: {\n        deletePlayer() {\n            this.$emit('deleteplayer', this.player.id);\n        }\n    },\n    props: {\n        player: Object,\n        data() {\n            return {};\n        },\n    }\n}\n</script>\n\n<style scoped>\ntr {\n    max-height: 100px;\n}\n\ninput {\n    color: white;\n    width: 50%;\n    text-align: center;\n}\n\n.swatch >>> .vue-swatches__container {\n    position: fixed;\n    left: 50% !important;\n    top: 50% !important;\n    transform: translate(-50%, -50%);\n }\n\n \n.swatch >>> .vue-swatches__trigger__wrapper {\n    margin-top: 5px;\n }\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PlayerDisplay.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PlayerDisplay.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./PlayerDisplay.vue?vue&type=template&id=4e64fd2a&scoped=true&\"\nimport script from \"./PlayerDisplay.vue?vue&type=script&lang=js&\"\nexport * from \"./PlayerDisplay.vue?vue&type=script&lang=js&\"\nimport style0 from \"./PlayerDisplay.vue?vue&type=style&index=0&id=4e64fd2a&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4e64fd2a\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\ninstallComponents(component, {VBtn,VIcon})\n","<template>\n  <div>\n    <v-btn\n      v-if=\"isCollapsed\"\n      @click=\"close()\"\n      style=\"right: 0; position: absolute\"\n      >Open</v-btn\n    >\n    <div\n      ref=\"parentEl\"\n      style=\"position: absolute\"\n      width=\"30%\"\n      v-if=\"!isCollapsed\"\n    >\n      <movable target=\"parentEl\" style=\"z-index: 10; height: 70px; width: 100%\">\n      </movable>\n      <v-card dark width=\"100%\" class=\"settings\" ref=\"settings\">\n        <v-card-title>\n          <span>Settings</span>\n        </v-card-title>\n        <v-list-item>\n          <v-list-item-content>\n            <v-expansion-panels>\n              <v-expansion-panel>\n                <v-expansion-panel-header> Players </v-expansion-panel-header>\n                <v-expansion-panel-content>\n                  <v-simple-table>\n                    <template v-slot:default>\n                      <thead>\n                        <tr>\n                          <th class=\"text-left\">#</th>\n                          <th class=\"text-left\">Content</th>\n                          <th class=\"text-left\">Background Color</th>\n                          <th class=\"text-left\">Foreground Color</th>\n                          <th class=\"text-left\">Size</th>\n                        </tr>\n                      </thead>\n                      <tbody>\n                        <player-display\n                          v-for=\"player in players\"\n                          :key=\"player.id\"\n                          :player=\"player\"\n                          @deleteplayer=\"deletePlayer($event)\"\n                        />\n                      </tbody>\n                    </template>\n                  </v-simple-table>\n                  <v-checkbox\n                    label=\"Line of sight\"\n                    @change=\"lineOfSightCheckboxChanged\"\n                  ></v-checkbox>\n                  <v-btn style=\"align-items: left\" @click=\"$emit('addplayer')\">\n                    + Add</v-btn\n                  >\n                </v-expansion-panel-content>\n              </v-expansion-panel>\n              <v-expansion-panel>\n                <v-expansion-panel-header> Enemies </v-expansion-panel-header>\n                <v-expansion-panel-content>\n                  <v-simple-table>\n                    <template v-slot:default>\n                      <thead>\n                        <tr>\n                          <th class=\"text-left\">#</th>\n                          <th class=\"text-left\">Content</th>\n                          <th class=\"text-left\">Background Color</th>\n                          <th class=\"text-left\">Foreground Color</th>\n                          <th class=\"text-left\">Size</th>\n                        </tr>\n                      </thead>\n                      <tbody>\n                        <player-display\n                          v-for=\"enemy in enemies\"\n                          :key=\"enemy.id\"\n                          :player=\"enemy\"\n                          @deleteplayer=\"deleteEnemy($event)\"\n                        />\n                      </tbody>\n                    </template>\n                  </v-simple-table>\n                  <v-btn style=\"align-items: left\" @click=\"$emit('addenemy')\">\n                    + Add</v-btn\n                  >\n                </v-expansion-panel-content>\n              </v-expansion-panel>\n              <v-expansion-panel>\n                <v-expansion-panel-header>\n                  Save/Load Positions\n                </v-expansion-panel-header>\n                <v-expansion-panel-content>\n                  <v-btn @click=\"save\">Save</v-btn>\n                  <label\n                    class=\"\n                      v-btn v-btn--is-elevated v-btn--has-bg\n                      theme--dark\n                      v-size--default\n                    \"\n                    style=\"\n                      margin-top: auto;\n                      margin-bottom: auto;\n                      margin-right: 20px;\n                    \"\n                  >\n                    <input\n                      type=\"file\"\n                      @input=\"onSelectScene\"\n                      ref=\"sceneUpload\"\n                      style=\"display: none\"\n                    />\n                    Load (.json)\n                  </label>\n                </v-expansion-panel-content>\n              </v-expansion-panel>\n              <v-expansion-panel>\n                <v-expansion-panel-header>\n                  Background\n                </v-expansion-panel-header>\n                <v-expansion-panel-content>\n                  <div class=\"flexbox\">\n                    <label\n                      class=\"\n                        v-btn v-btn--is-elevated v-btn--has-bg\n                        theme--dark\n                        v-size--default\n                      \"\n                      style=\"\n                        margin-top: auto;\n                        margin-bottom: auto;\n                        margin-right: 20px;\n                      \"\n                    >\n                      <input\n                        type=\"file\"\n                        @input=\"onSelectFile\"\n                        ref=\"fileInput\"\n                        style=\"display: none\"\n                      />\n                      Select Background (png jpg dd2vtt)\n                    </label>\n                    <v-text-field\n                      @change=\"$emit('changedbackground', size)\"\n                      class=\"background-size-input\"\n                      solo\n                      append-icon=\"mdi-image-size-select-large\"\n                      v-model=\"size\"\n                    ></v-text-field>\n                  </div>\n                </v-expansion-panel-content>\n              </v-expansion-panel>\n              <v-expansion-panel>\n                <v-expansion-panel-header> Debug </v-expansion-panel-header>\n                <v-expansion-panel-content>\n                  <v-btn @click=\"$emit('rerender')\">Rerender</v-btn>\n                  <v-btn @click=\"$emit('debugobstacle')\"\n                    >Render Obstacles</v-btn\n                  >\n                </v-expansion-panel-content>\n              </v-expansion-panel>\n            </v-expansion-panels>\n          </v-list-item-content>\n        </v-list-item>\n        <v-card-actions>\n          <v-btn color=\"orange lighten-2\" @click=\"close()\"> Close </v-btn>\n        </v-card-actions>\n      </v-card>\n    </div>\n  </div>\n</template>\n\n<script>\nimport PlayerDisplay from \"./PlayerDisplay.vue\";\n\nexport default {\n  components: { PlayerDisplay },\n  name: \"Settings\",\n  props: {\n    players: Array,\n    enemies: Array,\n    backgroundSize: Number,\n  },\n  data() {\n    return {\n      size: 400,\n      isCollapsed: false,\n    };\n  },\n  mounted() {\n    this.size = this.backgroundSize;\n  },\n  methods: {\n    close() {\n      this.isCollapsed = !this.isCollapsed;\n    },\n    save() {\n      const data = JSON.stringify({\n        players: this.players,\n        enemies: this.enemies,\n        backgroundSize: this.backgroundSize,\n      });\n      const downloadData =\n        \"data:text/json;charset=utf-8,\" + encodeURIComponent(data);\n      const downloadAnchor = document.createElement(\"a\");\n      downloadAnchor.style.display = \"none\";\n      downloadAnchor.setAttribute(\"href\", downloadData);\n      downloadAnchor.setAttribute(\"download\", \"scene.json\");\n      downloadAnchor.click();\n      console.log(data);\n    },\n    deletePlayer(id) {\n      this.$emit(\"deleteplayer\", id);\n    },\n    deleteEnemy(id) {\n      this.$emit(\"deleteenemy\", id);\n    },\n    lineOfSightCheckboxChanged(e) {\n      this.$emit(\"lineofsightchange\", e);\n    },\n    onSelectFile() {\n      const input = this.$refs.fileInput;\n      const files = input.files;\n      if (files && files[0]) {\n        const reader = new FileReader();\n        reader.onload = (e) => {\n          this.$emit(\"newbackground\", {\n            result: e.target.result,\n            name: files[0].name,\n          });\n        };\n        reader.readAsDataURL(files[0]);\n      } else {\n        console.log(\"no image selected\");\n      }\n    },\n    onSelectScene() {\n      const input = this.$refs.sceneUpload;\n      const files = input.files;\n      if (files && files[0]) {\n        const reader = new FileReader();\n        reader.onload = (e) => {\n          const data = JSON.parse(atob(e.target.result.split(\"base64,\")[1]));\n          console.log(data);\n          this.$emit(\"changedbackground\", data.backgroundSize);\n          this.$emit(\"changeenemies\", data.enemies);\n          this.$emit(\"changeplayers\", data.players);\n        };\n        reader.readAsDataURL(files[0]);\n      } else {\n        console.log(\"no scene selected\");\n      }\n    },\n  },\n};\n</script>\n\n<style scoped>\n.settings {\n  position: relative;\n  width: 100%;\n}\n.flexbox {\n  display: flex;\n  flex-direction: row;\n  width: 100%;\n  align-items: stretch;\n}\n.background-size-input {\n  margin-top: auto;\n  margin-bottom: auto;\n  height: 50px;\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Settings.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Settings.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Settings.vue?vue&type=template&id=6be7863a&scoped=true&\"\nimport script from \"./Settings.vue?vue&type=script&lang=js&\"\nexport * from \"./Settings.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Settings.vue?vue&type=style&index=0&id=6be7863a&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6be7863a\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VCardActions } from 'vuetify/lib/components/VCard';\nimport { VCardTitle } from 'vuetify/lib/components/VCard';\nimport { VCheckbox } from 'vuetify/lib/components/VCheckbox';\nimport { VExpansionPanel } from 'vuetify/lib/components/VExpansionPanel';\nimport { VExpansionPanelContent } from 'vuetify/lib/components/VExpansionPanel';\nimport { VExpansionPanelHeader } from 'vuetify/lib/components/VExpansionPanel';\nimport { VExpansionPanels } from 'vuetify/lib/components/VExpansionPanel';\nimport { VListItem } from 'vuetify/lib/components/VList';\nimport { VListItemContent } from 'vuetify/lib/components/VList';\nimport { VSimpleTable } from 'vuetify/lib/components/VDataTable';\nimport { VTextField } from 'vuetify/lib/components/VTextField';\ninstallComponents(component, {VBtn,VCard,VCardActions,VCardTitle,VCheckbox,VExpansionPanel,VExpansionPanelContent,VExpansionPanelHeader,VExpansionPanels,VListItem,VListItemContent,VSimpleTable,VTextField})\n","<template>\n  <div id=\"app\">\n    <settings\n      @changedbackground=\"backgroundSizeChanged($event)\"\n      :backgroundSize=\"backgroundImageSize\"\n      :players=\"players\"\n      :enemies=\"enemies\"\n      @rerender=\"rerender()\"\n      @newbackground=\"setBackground($event)\"\n      @deleteplayer=\"deletePlayer($event)\"\n      @deleteenemy=\"deleteEnemy($event)\"\n      @addplayer=\"addPlayer()\"\n      @addenemy=\"addEnemy()\"\n      @changeenemies=\"enemies = $event\"\n      @changeplayers=\"players = $event\"\n      @debugobstacle=\"debugObstacles()\"\n      @lineofsightchange=\"lineOfSightChange($event)\"\n    />\n    <canvas-renderer\n      :backgroundImageSize=\"backgroundImageSize\"\n      :players=\"players\"\n      :enemies=\"enemies\"\n      :backgroundImage=\"imageData\"\n      :lineOfSight=\"lineOfSight\"\n      :lineOfSightEnabled=\"lineOfSightEnabled\"\n      ref=\"canvasrenderer\"\n    />\n    <!--<div id=\"movables\" style=\"position: absolute;\">\n      <movable-entity v-for=\"player in players\" :key=\"player.id\" :width=\"player.size\" :height=\"player.size\" :backgroundColor=\"player.backgroundColor\" :foregroundColor=\"player.foregroundColor\" :content=\"player.content\"/>\n    </div>\n    <background :backgroundImage=\"imageData\"/>-->\n  </div>\n</template>\n\n<script>\nimport CanvasRenderer from \"./components/CanvasRenderer.vue\";\nimport Settings from \"./components/Settings.vue\";\n\nexport default {\n  name: \"app\",\n  components: {\n    Settings,\n    CanvasRenderer,\n  },\n  methods: {\n    debugObstacles() {\n      this.$refs.canvasrenderer.debugRenderObstacles();\n    },\n    backgroundSizeChanged(e) {\n      this.backgroundImageSize = +e;\n    },\n    rerender() {\n      this.$refs.canvasrenderer.rerender();\n    },\n    lineOfSightChange(e) {\n      this.lineOfSightEnabled = e;\n    },\n    setBackground(bg) {\n      if (bg.name.includes(\"vtt\")) {\n        const data = JSON.parse(atob(bg.result.split(\"base64,\")[1]));\n        this.imageData = \"data:image/png;base64,\" + data.image;\n        const mapSize = data.resolution.map_size;\n        for (let obstacle of data.line_of_sight) {\n          obstacle[0].x = obstacle[0].x / mapSize.x;\n          obstacle[0].y = obstacle[0].y / mapSize.y;\n          obstacle[1].x = obstacle[1].x / mapSize.x;\n          obstacle[1].y = obstacle[1].y / mapSize.y;\n        }\n        this.lineOfSight = data.line_of_sight;\n      } else {\n        this.imageData = bg.result;\n      }\n    },\n    addPlayer() {\n      this.players.push({\n        id:\n          this.players.reduce(\n            (m, v) => (m < v.id ? v.id : m),\n            this.players[0].id\n          ) + 1,\n        backgroundColor: this.players[0].backgroundColor,\n        foregroundColor: this.players[0].foregroundColor,\n        content: this.players[0].content,\n        size: this.players[0].size,\n      });\n    },\n    addEnemy() {\n      this.enemies.push({\n        id:\n          this.enemies.reduce(\n            (m, v) => (m < v.id ? v.id : m),\n            this.enemies[0].id\n          ) + 1,\n        backgroundColor: this.enemies[0].backgroundColor,\n        foregroundColor: this.enemies[0].foregroundColor,\n        content: this.enemies[0].content,\n        size: this.enemies[0].size,\n      });\n    },\n    deleteEnemy(id) {\n      this.enemies = this.enemies.filter((e) => e.id != id);\n    },\n    deletePlayer(id) {\n      this.players = this.players.filter((p) => p.id != id);\n    },\n  },\n  data() {\n    return {\n      lineOfSightEnabled: false,\n      backgroundImageSize: 800,\n      imageData: \"https://i.redd.it/oteavhdmcnl61.jpg\",\n      lineOfSight: [],\n      enemies: [\n        {\n          id: 0,\n          backgroundColor: \"#00ff00\",\n          foregroundColor: \"#ffffff\",\n          content: \"E\",\n          x: 100,\n          y: 100,\n          size: 25,\n        },\n      ],\n      players: [\n        {\n          id: 0,\n          backgroundColor: \"#ff0000\",\n          foregroundColor: \"#ffffff\",\n          content: \"P\",\n          x: 50,\n          y: 100,\n          size: 25,\n        },\n      ],\n    };\n  },\n};\n</script>\n\n<style>\n#app {\n  font-family: \"Avenir\", Helvetica, Arial, sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  text-align: center;\n  background-color: #424242;\n  z-index: -200;\n  color: #2c3e50;\n  height: 100%;\n  width: 100%;\n  position: absolute;\n}\n</style>\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=6791ea3c&\"\nimport script from \"./App.vue?vue&type=script&lang=js&\"\nexport * from \"./App.vue?vue&type=script&lang=js&\"\nimport style0 from \"./App.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","/* eslint-disable no-console */\n\nimport { register } from 'register-service-worker'\n\nif (process.env.NODE_ENV === 'production') {\n  register(`${process.env.BASE_URL}service-worker.js`, {\n    ready () {\n      console.log(\n        'App is being served from cache by a service worker.\\n' +\n        'For more details, visit https://goo.gl/AFskqB'\n      )\n    },\n    registered () {\n      console.log('Service worker has been registered.')\n    },\n    cached () {\n      console.log('Content has been cached for offline use.')\n    },\n    updatefound () {\n      console.log('New content is downloading.')\n    },\n    updated () {\n      console.log('New content is available; please refresh.')\n    },\n    offline () {\n      console.log('No internet connection found. App is running in offline mode.')\n    },\n    error (error) {\n      console.error('Error during service worker registration:', error)\n    }\n  })\n}\n","import Vue from 'vue';\nimport Vuetify from 'vuetify/lib/framework';\n\nVue.use(Vuetify);\n\nexport default new Vuetify({\n});\n","import Vue from 'vue'\nimport App from './App.vue'\nimport movable from 'v-movable';\nimport './registerServiceWorker'\nimport vuetify from './plugins/vuetify';\n\n\nVue.config.productionTip = false\n\nVue.use(movable);\n\nnew Vue({\n  vuetify,\n  render: h => h(App)\n}).$mount('#app')\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CanvasRenderer.vue?vue&type=style&index=0&id=0b1a8e1a&scoped=true&lang=css&\""],"sourceRoot":""}